"use strict";(self.webpackChunkair_monitoring_frontend=self.webpackChunkair_monitoring_frontend||[]).push([[770],{25770:(e,s,r)=>{r.r(s),r.d(s,{default:()=>A});var t=r(89379),o=r(65043),a=r(96446),n=r(63336),i=r(85865),l=r(67254),d=r(68903),c=r(15795),h=r(39336),m=r(11906),u=r(81637),p=r(95187),x=r(73216),w=r(70579);const A=()=>{const{currentUser:e,updateUser:s,logout:r}=(0,p.As)(),A=(0,x.Zp)(),[f,j]=(0,o.useState)(!1),[y,v]=(0,o.useState)(""),[g,b]=(0,o.useState)(""),[P,C]=(0,o.useState)({phone:"",password:"",confirmPassword:""});(0,o.useEffect)((()=>{e&&C((s=>(0,t.A)((0,t.A)({},s),{},{phone:e.phone||""})))}),[e]);const k=e=>{const{name:s,value:r}=e.target;C((e=>(0,t.A)((0,t.A)({},e),{},{[s]:r})))};return(0,w.jsx)(a.A,{sx:{maxWidth:800,mx:"auto",p:3},children:(0,w.jsxs)(n.A,{elevation:3,sx:{p:4,borderRadius:2},children:[(0,w.jsx)(i.A,{variant:"h4",gutterBottom:!0,color:"black",children:"Profile Settings"}),g&&(0,w.jsx)(l.A,{severity:"error",sx:{mb:2},children:g}),y&&(0,w.jsx)(l.A,{severity:"success",sx:{mb:2},children:y}),(0,w.jsx)("form",{onSubmit:async r=>{r.preventDefault(),j(!0),b(""),v("");try{if(P.password){if(P.password!==P.confirmPassword)throw new Error("Passwords do not match");if(P.password.length<6)throw new Error("Password must be at least 6 characters long");const e=/[A-Z]/.test(P.password),s=/[a-z]/.test(P.password),r=/\d/.test(P.password),t=/[!@#$%^&*(),.?":{}|<>]/.test(P.password);if(!e||!s||!r||!t)throw new Error("Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character")}const r=(0,t.A)((0,t.A)({},e),{},{phone:P.phone});P.password&&(r.password=P.password),await s(r),v("Profile updated successfully"),C((e=>(0,t.A)((0,t.A)({},e),{},{password:"",confirmPassword:""})))}catch(o){b(o.message||"Failed to update profile")}finally{j(!1)}},children:(0,w.jsxs)(d.Ay,{container:!0,spacing:3,children:[(0,w.jsx)(d.Ay,{item:!0,xs:12,children:(0,w.jsx)(i.A,{variant:"h6",gutterBottom:!0,color:"black",children:"Profile Information"})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,children:(0,w.jsx)(c.A,{fullWidth:!0,label:"Email",value:(null===e||void 0===e?void 0:e.email)||"",disabled:!0,variant:"outlined"})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,children:(0,w.jsx)(c.A,{fullWidth:!0,label:"Phone Number",name:"phone",value:P.phone,onChange:k,variant:"outlined",autoComplete:"off"})}),(0,w.jsx)(h.A,{sx:{my:3}}),(0,w.jsx)(d.Ay,{item:!0,xs:12,children:(0,w.jsx)(i.A,{variant:"h6",gutterBottom:!0,color:"black",children:"Change Password"})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsx)(c.A,{fullWidth:!0,label:"New Password",name:"password",type:"password",value:P.password,onChange:k,variant:"outlined",autoComplete:"new-password"})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsx)(c.A,{fullWidth:!0,label:"Confirm New Password",name:"confirmPassword",type:"password",value:P.confirmPassword,onChange:k,variant:"outlined",autoComplete:"new-password"})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,children:(0,w.jsx)(m.A,{type:"submit",variant:"contained",color:"primary",disabled:f,sx:{mr:2},children:f?(0,w.jsx)(u.A,{size:24}):"Save Changes"})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,children:(0,w.jsx)(h.A,{sx:{my:3}})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,children:(0,w.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,w.jsx)(m.A,{variant:"contained",color:"error",onClick:()=>{r(),A("/login")},size:"large",sx:{minWidth:200,py:1.5,fontSize:"1.1rem"},children:"Logout"})})})]})})]})})}}}]);
//# sourceMappingURL=770.7dbf1121.chunk.js.map