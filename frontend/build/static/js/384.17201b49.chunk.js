"use strict";(self.webpackChunkair_monitoring_frontend=self.webpackChunkair_monitoring_frontend||[]).push([[384],{50384:(t,e,n)=>{n.r(e),n.d(e,{default:()=>y});var i=n(65043),a=n(26240),s=n(68903),r=n(12110),o=n(26494),c=n(85865),l=n(63336),d=n(39336),x=n(96446),A=n(11906),b=n(67254),h=n(63777),m=n(95187),j=n(88027),u=n(89379),T=n(19882);const v=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var n,i,a,s,r,o;e||(e=await T.A.getTemplateByType("asbestosClearance"));const c={CLIENT_NAME:(null===(n=t.projectId)||void 0===n||null===(i=n.client)||void 0===i?void 0:i.name)||"Client Name",ASBESTOS_TYPE:(null===(a=t.clearanceType)||void 0===a?void 0:a.toLowerCase())||"non-friable",SITE_NAME:(null===(s=t.projectId)||void 0===s?void 0:s.name)||"Site Name",SITE_ADDRESS:(null===(r=t.projectId)||void 0===r?void 0:r.address)||"Site Address",PROJECT_ID:(null===(o=t.projectId)||void 0===o?void 0:o.projectID)||"Project ID",CLEARANCE_DATE:t.clearanceDate?new Date(t.clearanceDate).toLocaleDateString("en-GB"):"Clearance Date",ASBESTOS_REMOVALIST:t.asbestosRemovalist||"Asbestos Removalist",LAA_NAME:t.LAA||"LAA Name",LAA_LICENSE:"AA00031",INSPECTION_TIME:"Inspection Time",INSPECTION_DATE:t.clearanceDate?new Date(t.clearanceDate).toLocaleDateString("en-GB"):"Inspection Date",REPORT_TYPE:t.clearanceType||"Non-friable",LOGO_URL:"/images/logo.png"},l={};return Object.entries(e.standardSections).forEach((t=>{let[e,n]=t;l[e]=p(n,c)})),(0,u.A)((0,u.A)({},e),{},{standardSections:l,jobData:c})}catch(c){throw console.error("Error populating template content:",c),c}},p=(t,e)=>{if(!t)return"";let n=t;return Object.entries(e).forEach((t=>{let[e,i]=t;const a="{".concat(e,"}");n=n.replace(new RegExp(a,"g"),i||"")})),n},S=async(t,e)=>{try{const n=await v(t);return function(t,e){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null!==t&&void 0!==t&&null!==(n=t.standardSections)&&void 0!==n&&n[e]?p(t.standardSections[e],i):""}(n,e,n.jobData)}catch(n){return console.error("Error getting section content:",n),""}};var g=n(70579);const y=()=>{(0,a.A)(),h.LU;const{user:t}=(0,m.As)(),[e,n]=(0,i.useState)(null),[u,T]=(0,i.useState)(!1),[p,y]=(0,i.useState)(null),f={_id:"test-clearance-123",clearanceType:"Non-friable",clearanceDate:"2024-07-25",asbestosRemovalist:"Professional Asbestos Removal Pty Ltd",LAA:"Patrick Cerone",projectId:{name:"123 Sample Street, Canberra ACT",address:"123 Sample Street, Canberra ACT 2600",projectID:"PROJ-2024-001",client:{name:"Sample Client Pty Ltd"}}},C=async()=>{T(!0),y(null);try{const t=await async function(t,e){try{const e=await v(t),n=e.standardSections.frontCoverTitle,i=e.standardSections.inspectionDetailsTitle,a=e.standardSections.inspectionIntroduction,s=e.standardSections.clearanceCertificationTitle,r=e.standardSections.clearanceCertificationText,o=e.standardSections.riskAssessmentText,c=e.standardSections.contactText,l=e.standardSections.behalfText,d=e.standardSections.signatureTitle,x=e.standardSections.backgroundIntroduction,A=e.standardSections.bulletPoint1,b=e.standardSections.legislativeIntroduction,h=e.standardSections.limitationsText,m=e.standardSections.footerText;return console.log("Template integration example - populated content:",{reportTitle:n,inspectionTitle:i,inspectionIntro:a,certificationTitle:s,certificationText:r,riskText:o,contactText:c,behalfText:l,signatureTitle:d,backgroundText:x,bulletPoint1:A,legislativeText:b,limitationsText:h,footerText:m}),e}catch(p){throw console.error("Error integrating template with PDF:",p),e&&e("Failed to load template content"),p}}(f,y);n(t),console.log("Template integration successful:",t)}catch(t){console.error("Template integration failed:",t),y("Failed to load template data")}finally{T(!1)}};(0,i.useEffect)((()=>{C()}),[]);return(0,g.jsx)(j.A,{requiredPermissions:["admin.view"],children:(0,g.jsxs)(x.A,{m:"20px",children:[(0,g.jsxs)(x.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,g.jsx)(c.A,{variant:"h2",color:"black",fontWeight:"bold",sx:{mb:"5px"},children:"Template System Test"}),(0,g.jsx)(A.A,{onClick:C,variant:"contained",disabled:u,children:u?"Loading...":"Reload Template Data"})]}),(0,g.jsx)(c.A,{variant:"h5",color:"black",children:"Test the template system with sample data"}),p&&(0,g.jsx)(b.A,{severity:"error",sx:{mt:2,mb:2},children:p}),(0,g.jsxs)(x.A,{sx:{mt:3,mb:3},children:[(0,g.jsx)(c.A,{variant:"h6",color:"black",sx:{mb:2},children:"Test Individual Sections"}),(0,g.jsx)(s.Ay,{container:!0,spacing:2,children:["frontCoverTitle","inspectionDetailsTitle","clearanceCertificationTitle","backgroundTitle","legislativeTitle","limitationsTitle"].map((t=>(0,g.jsx)(s.Ay,{item:!0,children:(0,g.jsxs)(A.A,{variant:"outlined",onClick:()=>(async t=>{try{const e=await S(f,t);console.log("Section ".concat(t,":"),e),alert("".concat(t,": ").concat(e))}catch(e){console.error("Error getting section:",e),y("Failed to get section content")}})(t),size:"small",children:["Test ",t]})},t)))})]}),e&&(e?(0,g.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,g.jsx)(s.Ay,{item:!0,xs:12,md:6,children:(0,g.jsx)(r.A,{children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(c.A,{variant:"h6",color:"black",sx:{mb:2},children:"Front Cover Preview"}),(0,g.jsxs)(l.A,{sx:{p:3,backgroundColor:"white",color:"black",minHeight:"300px",fontFamily:"Arial, sans-serif"},children:[(0,g.jsx)(c.A,{variant:"h4",sx:{mb:2,color:"#009900",fontWeight:"bold"},children:e.standardSections.frontCoverTitle}),(0,g.jsx)(c.A,{variant:"h6",sx:{mb:3},children:e.standardSections.frontCoverSubtitle}),(0,g.jsx)(d.A,{sx:{my:2}}),(0,g.jsxs)(c.A,{variant:"body1",sx:{mb:1},children:[(0,g.jsx)("strong",{children:"Site:"})," ",e.jobData.SITE_NAME]}),(0,g.jsxs)(c.A,{variant:"body1",sx:{mb:1},children:[(0,g.jsx)("strong",{children:"Client:"})," ",e.jobData.CLIENT_NAME]}),(0,g.jsxs)(c.A,{variant:"body1",sx:{mb:1},children:[(0,g.jsx)("strong",{children:"Date:"})," ",e.jobData.CLEARANCE_DATE]})]})]})})}),(0,g.jsx)(s.Ay,{item:!0,xs:12,md:6,children:(0,g.jsx)(r.A,{children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(c.A,{variant:"h6",color:"black",sx:{mb:2},children:"Inspection Details Preview"}),(0,g.jsxs)(l.A,{sx:{p:3,backgroundColor:"white",color:"black",minHeight:"300px",fontFamily:"Arial, sans-serif"},children:[(0,g.jsx)(c.A,{variant:"h5",sx:{mb:2,fontWeight:"bold"},children:e.standardSections.inspectionDetailsTitle}),(0,g.jsx)(c.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:e.standardSections.inspectionIntroduction}),(0,g.jsx)(c.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:e.standardSections.inspectionSpecifics}),(0,g.jsx)(c.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:e.standardSections.tableIntroduction})]})]})})}),(0,g.jsx)(s.Ay,{item:!0,xs:12,md:6,children:(0,g.jsx)(r.A,{children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(c.A,{variant:"h6",color:"black",sx:{mb:2},children:"Clearance Certification Preview"}),(0,g.jsxs)(l.A,{sx:{p:3,backgroundColor:"white",color:"black",minHeight:"300px",fontFamily:"Arial, sans-serif"},children:[(0,g.jsx)(c.A,{variant:"h5",sx:{mb:2,fontWeight:"bold"},children:e.standardSections.clearanceCertificationTitle}),(0,g.jsx)(c.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:e.standardSections.clearanceCertificationText}),(0,g.jsx)(c.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:e.standardSections.riskAssessmentText}),(0,g.jsx)(c.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:e.standardSections.contactText}),(0,g.jsx)(c.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:e.standardSections.behalfText}),(0,g.jsx)(c.A,{variant:"body1",sx:{fontWeight:"bold"},children:e.standardSections.signatureTitle})]})]})})}),(0,g.jsx)(s.Ay,{item:!0,xs:12,md:6,children:(0,g.jsx)(r.A,{children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(c.A,{variant:"h6",color:"black",sx:{mb:2},children:"Background Information Preview"}),(0,g.jsxs)(l.A,{sx:{p:3,backgroundColor:"white",color:"black",minHeight:"300px",fontFamily:"Arial, sans-serif"},children:[(0,g.jsx)(c.A,{variant:"h5",sx:{mb:2,fontWeight:"bold"},children:e.standardSections.backgroundTitle}),(0,g.jsx)(c.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:e.standardSections.backgroundIntroduction}),(0,g.jsxs)(c.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",e.standardSections.bulletPoint1]}),(0,g.jsxs)(c.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",e.standardSections.bulletPoint2]}),(0,g.jsx)(c.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:e.standardSections.requirementsText}),(0,g.jsxs)(c.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",e.standardSections.bulletPoint3]}),(0,g.jsxs)(c.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",e.standardSections.bulletPoint4]}),(0,g.jsxs)(c.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",e.standardSections.bulletPoint5]})]})]})})})]}):null),e&&(0,g.jsx)(r.A,{sx:{mt:3},children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(c.A,{variant:"h6",color:"black",sx:{mb:2},children:"Job Data Used for Template Population"}),(0,g.jsx)(s.Ay,{container:!0,spacing:2,children:Object.entries(e.jobData).map((t=>{let[e,n]=t;return(0,g.jsx)(s.Ay,{item:!0,xs:12,md:6,children:(0,g.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,g.jsxs)(c.A,{variant:"body2",color:"black",children:[e,":"]}),(0,g.jsx)(c.A,{variant:"body2",color:"black",children:n})]})},e)}))})]})})]})})}}}]);
//# sourceMappingURL=384.17201b49.chunk.js.map