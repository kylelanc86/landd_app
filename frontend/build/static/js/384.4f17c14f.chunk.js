"use strict";(self.webpackChunkair_monitoring_frontend=self.webpackChunkair_monitoring_frontend||[]).push([[384],{19882:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(94505);const s={getAllTemplates:async()=>{try{const[e,t]=await Promise.all([n.Ay.get("/asbestos-clearance-templates"),n.Ay.get("/lead-assessment-templates")]);return[...e.data,...t.data]}catch(e){throw console.error("Error fetching report templates:",e),e}},getTemplateByType:async e=>{try{let t;if("asbestosClearanceNonFriable"===e||"asbestosClearanceFriable"===e)t=await n.Ay.get("/asbestos-clearance-templates/".concat(e));else{if("leadAssessment"!==e)throw new Error("Unknown template type: ".concat(e));t=await n.Ay.get("/lead-assessment-templates/".concat(e))}return t.data}catch(t){throw console.error("Error fetching report template:",t),t}},createTemplate:async e=>{try{const{templateType:t}=e;let a;if("asbestosClearanceNonFriable"===t||"asbestosClearanceFriable"===t)a=await n.Ay.post("/asbestos-clearance-templates",e);else{if("leadAssessment"!==t)throw new Error("Unknown template type: ".concat(t));a=await n.Ay.post("/lead-assessment-templates",e)}return a.data}catch(t){throw console.error("Error creating report template:",t),t}},updateTemplate:async(e,t)=>{try{let a;if("asbestosClearanceNonFriable"===e||"asbestosClearanceFriable"===e)a=await n.Ay.put("/asbestos-clearance-templates/".concat(e),t);else{if("leadAssessment"!==e)throw new Error("Unknown template type: ".concat(e));a=await n.Ay.put("/lead-assessment-templates/".concat(e),t)}return a.data}catch(a){throw console.error("Error updating report template:",a),a}},deleteTemplate:async e=>{try{let t;if("asbestosClearanceNonFriable"===e||"asbestosClearanceFriable"===e)t=await n.Ay.delete("/asbestos-clearance-templates/".concat(e));else{if("leadAssessment"!==e)throw new Error("Unknown template type: ".concat(e));t=await n.Ay.delete("/lead-assessment-templates/".concat(e))}return t.data}catch(t){throw console.error("Error deleting report template:",t),t}},initializeDefaultTemplates:async()=>{const e=[{templateType:"asbestosClearanceNonFriable",companyDetails:{name:"Lancaster & Dickenson Consulting Pty Ltd",address:"4/6 Dacre Street, Mitchell ACT 2911",email:"enquiries@landd.com.au",phone:"(02) 6241 2779",website:"www.landd.com.au",abn:"74 169 785 915"},reportHeaders:{title:"ASBESTOS REMOVAL CLEARANCE CERTIFICATE",subtitle:"Clearance Inspection Report"}},{templateType:"asbestosClearanceFriable",companyDetails:{name:"Lancaster & Dickenson Consulting Pty Ltd",address:"4/6 Dacre Street, Mitchell ACT 2911",email:"enquiries@landd.com.au",phone:"(02) 6241 2779",website:"www.landd.com.au",abn:"74 169 785 915"},reportHeaders:{title:"ASBESTOS REMOVAL CLEARANCE CERTIFICATE",subtitle:"Clearance Inspection Report"}},{templateType:"leadAssessment",companyDetails:{name:"Lancaster & Dickenson Consulting Pty Ltd",address:"4/6 Dacre Street, Mitchell ACT 2911",email:"enquiries@landd.com.au",phone:"(02) 6241 2779",website:"www.landd.com.au",abn:"74 169 785 915"},reportHeaders:{title:"LEAD ASSESSMENT REPORT",subtitle:"Lead Hazard Assessment"}}];try{for(const n of e)try{await s.getTemplateByType(n.templateType)}catch(a){var t;404===(null===(t=a.response)||void 0===t?void 0:t.status)&&(await s.createTemplate(n),console.log("Created default template for ".concat(n.templateType)))}}catch(a){throw console.error("Error initializing default templates:",a),a}}},r=s},50384:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(65043),s=a(26240),r=a(68903),i=a(12110),o=a(26494),l=a(85865),c=a(63336),d=a(39336),m=a(96446),A=a(11906),b=a(67254),x=a(63777),p=a(95187),h=a(88027),u=a(89379),y=a(19882);const T=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var a,n,s,r,i,o;t||(t=await y.A.getTemplateByType("asbestosClearance"));const l={CLIENT_NAME:(null===(a=e.projectId)||void 0===a||null===(n=a.client)||void 0===n?void 0:n.name)||"Client Name",ASBESTOS_TYPE:(null===(s=e.clearanceType)||void 0===s?void 0:s.toLowerCase())||"non-friable",SITE_NAME:(null===(r=e.projectId)||void 0===r?void 0:r.name)||"Site Name",SITE_ADDRESS:(null===(i=e.projectId)||void 0===i?void 0:i.address)||"Site Address",PROJECT_ID:(null===(o=e.projectId)||void 0===o?void 0:o.projectID)||"Project ID",CLEARANCE_DATE:e.clearanceDate?new Date(e.clearanceDate).toLocaleDateString("en-GB"):"Clearance Date",ASBESTOS_REMOVALIST:e.asbestosRemovalist||"Asbestos Removalist",LAA_NAME:e.LAA||"LAA Name",LAA_LICENSE:e.LAA_LICENSE||"AA00031",INSPECTION_TIME:"Inspection Time",INSPECTION_DATE:e.clearanceDate?new Date(e.clearanceDate).toLocaleDateString("en-GB"):"Inspection Date",REPORT_TYPE:e.clearanceType||"Non-friable",LOGO_URL:"/images/logo.png",SIGNATURE_IMAGE:"[SIGNATURE_PLACEHOLDER]"},c={};return Object.entries(t.standardSections).forEach((t=>{let[a,n]=t,s=j(n,l);"inspectionExclusionsContent"===a&&e.jobSpecificExclusions&&(s+="\n\n"+e.jobSpecificExclusions),c[a]=s})),(0,u.A)((0,u.A)({},t),{},{standardSections:c,jobData:l})}catch(l){throw console.error("Error populating template content:",l),l}},j=(e,t)=>{if(!e)return"";let a=e;return Object.entries(t).forEach((e=>{let[t,n]=e;const s="{".concat(t,"}");a=a.replace(new RegExp(s,"g"),n||"")})),a},S=async(e,t)=>{try{const a=await T(e);return function(e,t){var a;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null!==e&&void 0!==e&&null!==(a=e.standardSections)&&void 0!==a&&a[t]?j(e.standardSections[t],n):""}(a,t,a.jobData)}catch(a){return console.error("Error getting section content:",a),""}};var g=a(70579);const f=()=>{(0,s.A)(),x.LU;const{user:e}=(0,p.As)(),[t,a]=(0,n.useState)(null),[u,y]=(0,n.useState)(!1),[j,f]=(0,n.useState)(null),v={_id:"test-clearance-123",clearanceType:"Non-friable",clearanceDate:"2024-07-25",asbestosRemovalist:"Professional Asbestos Removal Pty Ltd",LAA:"Patrick Cerone",projectId:{name:"123 Sample Street, Canberra ACT",address:"123 Sample Street, Canberra ACT 2600",projectID:"PROJ-2024-001",client:{name:"Sample Client Pty Ltd"}}},E=async()=>{y(!0),f(null);try{const e=await async function(e,t){try{const t=await T(e),a=t.standardSections.frontCoverTitle,n=t.standardSections.inspectionDetailsTitle,s=t.standardSections.inspectionIntroduction,r=t.standardSections.clearanceCertificationTitle,i=t.standardSections.clearanceCertificationText,o=t.standardSections.riskAssessmentText,l=t.standardSections.contactText,c=t.standardSections.behalfText,d=t.standardSections.signatureTitle,m=t.standardSections.backgroundIntroduction,A=t.standardSections.bulletPoint1,b=t.standardSections.legislativeIntroduction,x=t.standardSections.limitationsText,p=t.standardSections.footerText;return console.log("Template integration example - populated content:",{reportTitle:a,inspectionTitle:n,inspectionIntro:s,certificationTitle:r,certificationText:i,riskText:o,contactText:l,behalfText:c,signatureTitle:d,backgroundText:m,bulletPoint1:A,legislativeText:b,limitationsText:x,footerText:p}),t}catch(j){throw console.error("Error integrating template with PDF:",j),t&&t("Failed to load template content"),j}}(v,f);a(e),console.log("Template integration successful:",e)}catch(e){console.error("Template integration failed:",e),f("Failed to load template data")}finally{y(!1)}};(0,n.useEffect)((()=>{E()}),[]);return(0,g.jsx)(h.A,{requiredPermissions:["admin.view"],children:(0,g.jsxs)(m.A,{m:"20px",children:[(0,g.jsxs)(m.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,g.jsx)(l.A,{variant:"h2",color:"black",fontWeight:"bold",sx:{mb:"5px"},children:"Template System Test"}),(0,g.jsx)(A.A,{onClick:E,variant:"contained",disabled:u,children:u?"Loading...":"Reload Template Data"})]}),(0,g.jsx)(l.A,{variant:"h5",color:"black",children:"Test the template system with sample data"}),j&&(0,g.jsx)(b.A,{severity:"error",sx:{mt:2,mb:2},children:j}),(0,g.jsxs)(m.A,{sx:{mt:3,mb:3},children:[(0,g.jsx)(l.A,{variant:"h6",color:"black",sx:{mb:2},children:"Test Individual Sections"}),(0,g.jsx)(r.Ay,{container:!0,spacing:2,children:["frontCoverTitle","inspectionDetailsTitle","clearanceCertificationTitle","backgroundTitle","legislativeTitle","limitationsTitle"].map((e=>(0,g.jsx)(r.Ay,{item:!0,children:(0,g.jsxs)(A.A,{variant:"outlined",onClick:()=>(async e=>{try{const t=await S(v,e);console.log("Section ".concat(e,":"),t),alert("".concat(e,": ").concat(t))}catch(t){console.error("Error getting section:",t),f("Failed to get section content")}})(e),size:"small",children:["Test ",e]})},e)))})]}),t&&(t?(0,g.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,g.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,g.jsx)(i.A,{children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(l.A,{variant:"h6",color:"black",sx:{mb:2},children:"Front Cover Preview"}),(0,g.jsxs)(c.A,{sx:{p:3,backgroundColor:"white",color:"black",minHeight:"300px",fontFamily:"Arial, sans-serif"},children:[(0,g.jsx)(l.A,{variant:"h4",sx:{mb:2,color:"#009900",fontWeight:"bold"},children:t.standardSections.frontCoverTitle}),(0,g.jsx)(l.A,{variant:"h6",sx:{mb:3},children:t.standardSections.frontCoverSubtitle}),(0,g.jsx)(d.A,{sx:{my:2}}),(0,g.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,g.jsx)("strong",{children:"Site:"})," ",t.jobData.SITE_NAME]}),(0,g.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,g.jsx)("strong",{children:"Client:"})," ",t.jobData.CLIENT_NAME]}),(0,g.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,g.jsx)("strong",{children:"Date:"})," ",t.jobData.CLEARANCE_DATE]})]})]})})}),(0,g.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,g.jsx)(i.A,{children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(l.A,{variant:"h6",color:"black",sx:{mb:2},children:"Inspection Details Preview"}),(0,g.jsxs)(c.A,{sx:{p:3,backgroundColor:"white",color:"black",minHeight:"300px",fontFamily:"Arial, sans-serif"},children:[(0,g.jsx)(l.A,{variant:"h5",sx:{mb:2,fontWeight:"bold"},children:t.standardSections.inspectionDetailsTitle}),(0,g.jsx)(l.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:t.standardSections.inspectionIntroduction}),(0,g.jsx)(l.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:t.standardSections.inspectionSpecifics}),(0,g.jsx)(l.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:t.standardSections.tableIntroduction})]})]})})}),(0,g.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,g.jsx)(i.A,{children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(l.A,{variant:"h6",color:"black",sx:{mb:2},children:"Clearance Certification Preview"}),(0,g.jsxs)(c.A,{sx:{p:3,backgroundColor:"white",color:"black",minHeight:"300px",fontFamily:"Arial, sans-serif"},children:[(0,g.jsx)(l.A,{variant:"h5",sx:{mb:2,fontWeight:"bold"},children:t.standardSections.clearanceCertificationTitle}),(0,g.jsx)(l.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:t.standardSections.clearanceCertificationText}),(0,g.jsx)(l.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:t.standardSections.riskAssessmentText}),(0,g.jsx)(l.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:t.standardSections.contactText}),(0,g.jsx)(l.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:t.standardSections.behalfText}),(0,g.jsx)(l.A,{variant:"body1",sx:{fontWeight:"bold"},children:t.standardSections.signatureTitle})]})]})})}),(0,g.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,g.jsx)(i.A,{children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(l.A,{variant:"h6",color:"black",sx:{mb:2},children:"Background Information Preview"}),(0,g.jsxs)(c.A,{sx:{p:3,backgroundColor:"white",color:"black",minHeight:"300px",fontFamily:"Arial, sans-serif"},children:[(0,g.jsx)(l.A,{variant:"h5",sx:{mb:2,fontWeight:"bold"},children:t.standardSections.backgroundTitle}),(0,g.jsx)(l.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:t.standardSections.backgroundIntroduction}),(0,g.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",t.standardSections.bulletPoint1]}),(0,g.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",t.standardSections.bulletPoint2]}),(0,g.jsx)(l.A,{variant:"body1",sx:{mb:2,textAlign:"justify"},children:t.standardSections.requirementsText}),(0,g.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",t.standardSections.bulletPoint3]}),(0,g.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",t.standardSections.bulletPoint4]}),(0,g.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:["\u2022 ",t.standardSections.bulletPoint5]})]})]})})})]}):null),t&&(0,g.jsx)(i.A,{sx:{mt:3},children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(l.A,{variant:"h6",color:"black",sx:{mb:2},children:"Job Data Used for Template Population"}),(0,g.jsx)(r.Ay,{container:!0,spacing:2,children:Object.entries(t.jobData).map((e=>{let[t,a]=e;return(0,g.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,g.jsxs)(m.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,g.jsxs)(l.A,{variant:"body2",color:"black",children:[t,":"]}),(0,g.jsx)(l.A,{variant:"body2",color:"black",children:a})]})},t)}))})]})})]})})}}}]);
//# sourceMappingURL=384.4f17c14f.chunk.js.map